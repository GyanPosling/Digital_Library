<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Details</title>
    <style>
        .info { margin-bottom: 20px; }
        .status { margin: 20px 0; padding: 10px; background: #f5f5f5; }
        .actions { margin-bottom: 20px; }
        .btn { padding: 6px 10px; margin-right: 5px; text-decoration: none; }
        .edit-btn { background: #FFC107; color: black; }
        .delete-btn { background: #F44336; color: white; }
        .back-btn { background: #9E9E9E; color: white; }
        .assign-form { margin-top: 15px; }
    </style>
</head>
<body>
<div class="info">
    <h1>Book Details</h1>
    <p><strong>Title:</strong> <span th:text="${book.title}"></span></p>
    <p><strong>Author:</strong> <span th:text="${book.author}"></span></p>
    <p><strong>Year:</strong> <span th:text="${book.year}"></span></p>
</div>

<div class="actions">
    <a th:href="@{/books/{id}/edit(id=${book.id})}" class="btn edit-btn">Edit</a>
    <form th:action="@{/books/{id}(id=${book.id})}" th:method="delete" style="display: inline;">
        <button type="submit" class="btn delete-btn">Delete</button>
    </form>
    <a th:href="@{/books}" class="btn back-btn">Back to List</a>
</div>

<div class="status" th:if="${owner != null}">
    <p>Currently borrowed by: <span th:text="${owner.fullName}"></span></p>
    <form th:action="@{/books/{id}/release(id=${book.id})}" th:method="post">
        <button type="submit">Release Book</button>
    </form>
</div>

<div class="status" th:unless="${owner != null}">
    <p>This book is currently available.</p>
    <form class="assign-form" th:action="@{/books/{id}/assign(id=${book.id})}" th:method="post">
        <select name="personId">
            <option th:each="person : ${people}"
                    th:value="${person.id}"
                    th:text="${person.fullName}"></option>
        </select>
        <button type="submit">Assign Book</button>
    </form>
</div>
</body>
</html>